"use strict";(self.webpackChunkpadme_browser=self.webpackChunkpadme_browser||[]).push([[975],{269:(t,e,n)=>{n.d(e,{DH:()=>v,mp:()=>C,d:()=>A,G2:()=>S,pT:()=>E,ug:()=>O,h4:()=>P,Ih:()=>T,yq:()=>N,gk:()=>D,ry:()=>F,Or:()=>R});var r=n(671),a=n(144),i=n(564);t=n.hmd(t);var s=new Array(32).fill(void 0);s.push(void 0,null,!0,!1);var o=s.length;function l(t){o===s.length&&s.push(s.length+1);var e=o;return o=s[e],s[e]=t,e}function c(t){return s[t]}function u(t){var e=c(t);return function(t){t<36||(s[t]=o,o=t)}(t),e}var h=new("undefined"==typeof TextDecoder?(0,t.require)("util").TextDecoder:TextDecoder)("utf-8",{ignoreBOM:!0,fatal:!0});h.decode();var p=null;function d(){return null!==p&&p.buffer===i.memory.buffer||(p=new Uint8Array(i.memory.buffer)),p}function f(t,e){return h.decode(d().subarray(t,t+e))}function v(){i.main()}var y=0;function m(t,e){var n=e(1*t.length);return d().set(t,n/1),y=t.length,n}var _=null;function g(){return null!==_&&_.buffer===i.memory.buffer||(_=new Int32Array(i.memory.buffer)),_}function b(t,e){if(!(t instanceof e))throw new Error("expected instance of ".concat(e.name));return t.ptr}var w=new("undefined"==typeof TextEncoder?(0,t.require)("util").TextEncoder:TextEncoder)("utf-8"),k="function"==typeof w.encodeInto?function(t,e){return w.encodeInto(t,e)}:function(t,e){var n=w.encode(t);return e.set(n),{read:t.length,written:n.length}};function x(t,e){try{return t.apply(this,e)}catch(t){i.__wbindgen_exn_store(l(t))}}var C=Object.freeze({A:0,0:"A",B:1,1:"B",Select:2,2:"Select",Start:3,3:"Start",Up:4,4:"Up",Down:5,5:"Down",Left:6,6:"Left",Right:7,7:"Right"}),A=function(){function t(){(0,r.Z)(this,t)}return(0,a.Z)(t,[{key:"__destroy_into_raw",value:function(){var t=this.ptr;return this.ptr=0,t}},{key:"free",value:function(){var t=this.__destroy_into_raw();i.__wbg_cartridge_free(t)}},{key:"title",value:function(){return u(i.cartridge_title(this.ptr))}},{key:"cartridge_type",value:function(){return u(i.cartridge_cartridge_type(this.ptr))}},{key:"licensee",value:function(){return u(i.cartridge_licensee(this.ptr))}},{key:"cgb_mode",value:function(){return u(i.cartridge_cgb_mode(this.ptr))}},{key:"is_sgb",value:function(){return u(i.cartridge_is_sgb(this.ptr))}},{key:"is_jp",value:function(){return u(i.cartridge_is_jp(this.ptr))}},{key:"rom_size",value:function(){return u(i.cartridge_rom_size(this.ptr))}},{key:"ram_size",value:function(){return u(i.cartridge_ram_size(this.ptr))}},{key:"version",value:function(){return u(i.cartridge_version(this.ptr))}},{key:"checksum",value:function(){return u(i.cartridge_checksum(this.ptr))}}],[{key:"__wrap",value:function(e){var n=Object.create(t.prototype);return n.ptr=e,n}},{key:"new",value:function(e){try{var n=i.__wbindgen_add_to_stack_pointer(-16),r=m(e,i.__wbindgen_malloc),a=y;i.cartridge_new(n,r,a);var s=g()[n/4+0],o=g()[n/4+1];if(g()[n/4+2])throw u(o);return t.__wrap(s)}finally{i.__wbindgen_add_to_stack_pointer(16)}}}]),t}(),S=function(){function t(){(0,r.Z)(this,t)}return(0,a.Z)(t,[{key:"__destroy_into_raw",value:function(){var t=this.ptr;return this.ptr=0,t}},{key:"free",value:function(){var t=this.__destroy_into_raw();i.__wbg_emulator_free(t)}},{key:"load_cartridge",value:function(t){b(t,A);var e=t.ptr;t.ptr=0,i.emulator_load_cartridge(this.ptr,e)}},{key:"load_bin",value:function(t){try{var e=i.__wbindgen_add_to_stack_pointer(-16),n=m(t,i.__wbindgen_malloc),r=y;i.emulator_load_bin(e,this.ptr,n,r);var a=g()[e/4+0];if(g()[e/4+1])throw u(a)}finally{i.__wbindgen_add_to_stack_pointer(16)}}},{key:"update",value:function(){return i.emulator_update(this.ptr)>>>0}},{key:"min_frame_time",value:function(){return i.emulator_min_frame_time(this.ptr)>>>0}},{key:"framebuffer",value:function(){return i.emulator_framebuffer(this.ptr)}},{key:"reset",value:function(){i.emulator_reset(this.ptr)}},{key:"set_button",value:function(t,e){i.emulator_set_button(this.ptr,t,e)}}],[{key:"__wrap",value:function(e){var n=Object.create(t.prototype);return n.ptr=e,n}},{key:"new",value:function(e,n){b(e,A);var r=e.ptr;e.ptr=0;var a=i.emulator_new(r,l(n));return t.__wrap(a)}}]),t}();function E(t){return l(t)}function O(t){u(t)}function P(t,e){return l(f(t,e))}function T(){return l(new Error)}function N(t,e){var n=function(t,e,n){if(void 0===n){var r=w.encode(t),a=e(r.length);return d().subarray(a,a+r.length).set(r),y=r.length,a}for(var i=t.length,s=e(i),o=d(),l=0;l<i;l++){var c=t.charCodeAt(l);if(c>127)break;o[s+l]=c}if(l!==i){0!==l&&(t=t.slice(l)),s=n(s,i,i=l+3*t.length);var u=d().subarray(s+l,s+i);l+=k(t,u).written}return y=l,s}(c(e).stack,i.__wbindgen_malloc,i.__wbindgen_realloc),r=y;g()[t/4+1]=r,g()[t/4+0]=n}function D(t,e){try{console.error(f(t,e))}finally{i.__wbindgen_free(t,e)}}function F(){return x((function(t,e,n){return l(c(t).call(c(e),c(n)))}),arguments)}function R(t,e){throw new Error(f(t,e))}},975:(t,e,n)=>{n.r(e);var r=n(269),a=n(400),i=n(323);const s="nm9zOsq6o2llwF9DqtIH";var o,l=function(){var t=(0,i.bI)("cartridge").cartridge,e=t.loaded,n=t.title,r=t.type,o=t.licensee,l=t.romSize,c=t.ramSize,u=t.colorMode,h=t.isJp,p=t.version,d=t.checksum,f=e?"EP1GwsasforztpTe_41c":"";return(0,a.h)("div",{class:"".concat("WIy5dRsGYN1EqLrHXtiT"," ").concat(f)},(0,a.h)("div",{class:"LaNu8nOkvsJZvMqdlfCt"},(0,a.h)("div",{class:"GMwSqhSvc_Izs13pl9eF"},n)),(0,a.h)("div",{class:"MTHp3nDLki_jEylopxyP"},(0,a.h)("table",{class:"is-size-7"},(0,a.h)("tr",null,(0,a.h)("td",null,"Cartridge type:"),(0,a.h)("td",{class:s},r)),(0,a.h)("tr",null,(0,a.h)("td",null,"Licensee:"),(0,a.h)("td",{class:s},o)),(0,a.h)("tr",null,(0,a.h)("td",null,"Size:"),(0,a.h)("td",{class:s},l," KB")),(0,a.h)("tr",null,(0,a.h)("td",null,"Ram size:"),(0,a.h)("td",{class:s},c," KB")),(0,a.h)("tr",null,(0,a.h)("td",null,"Color support:"),(0,a.h)("td",{class:s},u)),(0,a.h)("tr",null,(0,a.h)("td",null,"Japanese:"),(0,a.h)("td",{class:s},h?"Yes":"No")),(0,a.h)("tr",null,(0,a.h)("td",null,"Version:"),(0,a.h)("td",{class:s},p)),(0,a.h)("tr",null,(0,a.h)("td",null,"Checksum:"),(0,a.h)("td",{class:s},d?"✔":"✘")))))},c=n(396),u=n(661),h=function(t){var e=t.children,n=t.wrapperId,r=(0,c.eJ)(),a=r[0],i=r[1];return(0,c.bt)((function(){var t=document.getElementById(n);return t||(t=function(t){var e=document.createElement("div");return e.setAttribute("id",t),document.body.appendChild(e),e}(n)),i(t),function(){t&&t.parentNode&&t.parentNode.removeChild(t)}}),[n]),a?(0,u.jz)(e,a):null},p=function(t){var e=t.children,n=t.footer,r=t.isOpen,i=t.onClose,s=t.title,o=(0,c.sO)(null);return(0,a.h)(h,{wrapperId:"modals"},(0,a.h)("div",{class:"modal ".concat(r?"is-active":"")},(0,a.h)("div",{ref:o,class:"modal-background",onClick:function(t){t.target==o.current&&i()}}),(0,a.h)("div",{class:"modal-card"},(0,a.h)("header",{class:"modal-card-head"},(0,a.h)("p",{class:"modal-card-title"},s),(0,a.h)("button",{class:"delete","aria-label":"close",onClick:i})),(0,a.h)("section",{class:"modal-card-body"},e),(0,a.h)("footer",{class:"modal-card-foot"},n))))};!function(t){t[t.BACKSPACE=8]="BACKSPACE",t[t.TAB=9]="TAB",t[t.ENTER=13]="ENTER",t[t.SHIFT=16]="SHIFT",t[t.CTRL=17]="CTRL",t[t.ALT=18]="ALT",t[t.PAUSE=19]="PAUSE",t[t.CAPS=20]="CAPS",t[t.ESC=27]="ESC",t[t.SPACE=32]="SPACE",t[t["PAGE UP"]=33]="PAGE UP",t[t["PAGE DOWN"]=34]="PAGE DOWN",t[t.END=35]="END",t[t.HOME=36]="HOME",t[t["⬅"]=37]="⬅",t[t["⬆"]=38]="⬆",t[t["➡"]=39]="➡",t[t["⬇"]=40]="⬇",t[t.INSERT=45]="INSERT",t[t.DELETE=46]="DELETE",t[t["0 "]=48]="0 ",t[t["1 "]=49]="1 ",t[t["2 "]=50]="2 ",t[t["3 "]=51]="3 ",t[t["4 "]=52]="4 ",t[t["5 "]=53]="5 ",t[t["6 "]=54]="6 ",t[t["7 "]=55]="7 ",t[t["8 "]=56]="8 ",t[t["9 "]=57]="9 ",t[t.A=65]="A",t[t.B=66]="B",t[t.C=67]="C",t[t.D=68]="D",t[t.E=69]="E",t[t.F=70]="F",t[t.G=71]="G",t[t.H=72]="H",t[t.I=73]="I",t[t.J=74]="J",t[t.K=75]="K",t[t.L=76]="L",t[t.M=77]="M",t[t.N=78]="N",t[t.O=79]="O",t[t.P=80]="P",t[t.Q=81]="Q",t[t.R=82]="R",t[t.S=83]="S",t[t.T=84]="T",t[t.U=85]="U",t[t.V=86]="V",t[t.W=87]="W",t[t.X=88]="X",t[t.Y=89]="Y",t[t.Z=90]="Z",t[t.LEFT_META=91]="LEFT_META",t[t.RIGHT_META=92]="RIGHT_META",t[t.SELECT=93]="SELECT",t[t["NUMPAD 0"]=96]="NUMPAD 0",t[t["NUMPAD 1"]=97]="NUMPAD 1",t[t["NUMPAD 2"]=98]="NUMPAD 2",t[t["NUMPAD 3"]=99]="NUMPAD 3",t[t["NUMPAD 4"]=100]="NUMPAD 4",t[t["NUMPAD 5"]=101]="NUMPAD 5",t[t["NUMPAD 6"]=102]="NUMPAD 6",t[t["NUMPAD 7"]=103]="NUMPAD 7",t[t["NUMPAD 8"]=104]="NUMPAD 8",t[t["NUMPAD 9"]=105]="NUMPAD 9",t[t["NUMPAD *"]=106]="NUMPAD *",t[t["NUMPAD +"]=107]="NUMPAD +",t[t["NUMPAD -"]=109]="NUMPAD -",t[t["NUMPAD ."]=110]="NUMPAD .",t[t["NUMPAD /"]=111]="NUMPAD /",t[t.F1=112]="F1",t[t.F2=113]="F2",t[t.F3=114]="F3",t[t.F4=115]="F4",t[t.F5=116]="F5",t[t.F6=117]="F6",t[t.F7=118]="F7",t[t.F8=119]="F8",t[t.F9=120]="F9",t[t.F10=121]="F10",t[t.F11=122]="F11",t[t.F12=123]="F12",t[t.NUM_LOCK=144]="NUM_LOCK",t[t.SCROLL_LOCK=145]="SCROLL_LOCK",t[t[";"]=186]=";",t[t["="]=187]="=",t[t[","]=188]=",",t[t["-"]=189]="-",t[t["."]=190]=".",t[t["/"]=191]="/",t[t.GRAVE_ACCENT=192]="GRAVE_ACCENT",t[t["["]=219]="[",t[t["\\"]=220]="\\",t[t["]"]=221]="]",t[t["'"]=222]="'"}(o||(o={}));var d=function(){return window.screen.width<768},f="padme_www_1";var v=function(t){var e=t.onKey,n=t.code,r=(0,c.sO)(null),i=function(t){t&&(t.preventDefault(),e(t.keyCode)),s()},s=function(){var t,e;null===(t=null==r?void 0:r.current)||void 0===t||t.removeEventListener("keydown",i),null===(e=null==r?void 0:r.current)||void 0===e||e.blur()};return(0,a.h)("input",{ref:r,class:"input is-small ".concat("cilr3p8hu0w5rOP45n9Y"),readonly:!0,type:"text",value:o[n],onFocus:function(){var t;null===(t=null==r?void 0:r.current)||void 0===t||t.addEventListener("keydown",i)},onBlur:s})};const y="Qof904YgqIEwdB9tlwvF",m="iQxbZKIrwS4Xt7k3yGjw",_="_jl9FULPLNOyIvqLNr9F",g="HUyzH8U65mEovpET2omO",b="SbZd4Jld8i61kybMZps5";var w=function(){var t=(0,i.bI)("settings"),e=t.dispatch,n=t.settings;return(0,a.h)("table",{class:"".concat("t46Fo047PTJnhx74YtFn"," is-size-6")},(0,a.h)("tr",null,(0,a.h)("td",null,(0,a.h)("label",{class:y,for:"up-input"},(0,a.h)("div",{class:"".concat(m," ").concat("Bmg3rKp2nS2bKM90riKE")}))),(0,a.h)("td",{class:_},(0,a.h)(v,{code:n.keys[r.mp.Up],onKey:function(t){return e("settings/key/update",{name:r.mp.Up,code:t})}})),(0,a.h)("td",null,(0,a.h)("label",{class:y,for:"left-input"},(0,a.h)("div",{class:"".concat(m," ").concat("cD8KZx9Ng2HMRS_RCwYa")}))),(0,a.h)("td",{class:_},(0,a.h)(v,{code:n.keys[r.mp.Left],onKey:function(t){return e("settings/key/update",{name:r.mp.Left,code:t})}})),(0,a.h)("td",null,(0,a.h)("label",{class:y,for:"right-input"},(0,a.h)("div",{class:"".concat(m," ").concat("isMt_OElWxmHElwVMGEd")}))),(0,a.h)("td",{class:_},(0,a.h)(v,{code:n.keys[r.mp.Right],onKey:function(t){return e("settings/key/update",{name:r.mp.Right,code:t})}})),(0,a.h)("td",null,(0,a.h)("label",{class:y,for:"down-input"},(0,a.h)("div",{class:"".concat(m," ").concat("HktOHQxd37_GYsaiUHmo")}))),(0,a.h)("td",{class:_},(0,a.h)(v,{code:n.keys[r.mp.Down],onKey:function(t){return e("settings/key/update",{name:r.mp.Down,code:t})}}))),(0,a.h)("tr",null,(0,a.h)("td",null,(0,a.h)("label",{class:g,for:"a-input"},"A")),(0,a.h)("td",{class:_},(0,a.h)(v,{code:n.keys[r.mp.A],onKey:function(t){return e("settings/key/update",{name:r.mp.A,code:t})}})),(0,a.h)("td",null,(0,a.h)("label",{class:g,for:"b-input"},"B")),(0,a.h)("td",{class:_},(0,a.h)(v,{code:n.keys[r.mp.B],onKey:function(t){return e("settings/key/update",{name:r.mp.B,code:t})}})),(0,a.h)("td",null,(0,a.h)("label",{class:b,for:"select-input"},"SELECT")),(0,a.h)("td",{class:_},(0,a.h)(v,{code:n.keys[r.mp.Select],onKey:function(t){return e("settings/key/update",{name:r.mp.Select,code:t})}})),(0,a.h)("td",null,(0,a.h)("label",{class:b,for:"start-input"},"START")),(0,a.h)("td",{class:_},(0,a.h)(v,{code:n.keys[r.mp.Start],onKey:function(t){return e("settings/key/update",{name:r.mp.Start,code:t})}}))))},k=function(t){var e=t.isOpen,n=t.onClose;return(0,a.h)(p,{title:"Help center",isOpen:e,onClose:n},(0,a.h)("div",null,(0,a.h)("section",{class:"section"},(0,a.h)("h6",{class:"title is-5"},"How to play?"),(0,a.h)("p",{class:"is-size-6 pb-2"},"1. Select a game. You can find games online, usually typing ",(0,a.h)("code",null,"gameboy rom tetris")," on any search engine works."),d()?(0,a.h)("p",{class:"is-size-6"},"2. Each control is touchable"):(0,a.h)("p",{class:"is-size-6"},"2. Use the following keyboard mapping:",(0,a.h)(w,null))),(0,a.h)("section",{class:"section"},(0,a.h)("h6",{class:"title is-5"},"Bugs or feature requests?"),(0,a.h)("p",{class:"is-size-6"},"Please send me an email at alexlt@pm.me or open an ",(0,a.h)("a",{href:"https://github.com/alexlren/padme-browser/issues"},"issue on github"))),(0,a.h)("section",{class:"section"},(0,a.h)("h6",{class:"title is-5"},"How is this emulator made?"),(0,a.h)("p",{class:"is-size-6"},"First, there is a ",(0,a.h)("a",{href:"https://github.com/alexlren/padme-core"},"core")," made using the Rust programming language. It's platform-agnostic but it provides the tools to create an emulator depending on your platform."),(0,a.h)("p",{class:"is-size-6"},"Then, there is a ",(0,a.h)("a",{href:"https://github.com/alexlren/padme-browser/tree/main/src"},"WebAssembly wrapper"),", that uses the core but implements a real screen and a simple interface to be used by the last piece."),(0,a.h)("p",{class:"is-size-6"},"Finally, there is a ",(0,a.h)("a",{href:"https://github.com/alexlren/padme-browser/tree/main/www"},"web app"),", that embeds the webassembly library as the emulator and deals with everything UI-related."))))},x=function(t){var e=t.isOpen,n=t.onClose,r=(0,i.bI)("settings"),s=r.dispatch,o=r.settings,l=(0,a.h)("button",{class:"button",onClick:function(){return s("settings/reset")}},"Reset to default");return(0,a.h)(p,{title:"Settings",isOpen:e,onClose:n,footer:l},(0,a.h)("div",null,(0,a.h)("div",{class:"columns"},(0,a.h)("div",{class:"column is-two-thirds"},(0,a.h)("div",{class:"field is-horizontal"},(0,a.h)("div",{class:"field-label"},(0,a.h)("label",{class:"label"},"Scale")),(0,a.h)("div",{class:"field-body"},(0,a.h)("div",{class:"field"},(0,a.h)("div",{class:"control"},(0,a.h)("input",{type:"range",onInput:function(t){t.target&&s("settings/scale/update",t.target.value)},step:.1,min:1,max:3,id:"scale-input",value:o.scale}))))),(0,a.h)("div",{class:"field is-horizontal"},(0,a.h)("div",{class:"field-label"},(0,a.h)("label",{class:"label"},"Style")),(0,a.h)("div",{class:"field-body"},(0,a.h)("div",{class:"field"},(0,a.h)("div",{class:"control"},(0,a.h)("div",{class:"select"},(0,a.h)("select",{id:"style-input",value:o.styleName,onChange:function(t){t.target&&s("settings/style/update",t.target.value)}},(0,a.h)("option",{value:"nostyle"},"No style"),(0,a.h)("option",{value:"classic"},"Retro"))))))),(0,a.h)("div",{class:"field is-horizontal"},(0,a.h)("div",{class:"field-label"},(0,a.h)("label",{class:"label"},"Max FPS")),(0,a.h)("div",{class:"field-body"},(0,a.h)("div",{class:"field"},(0,a.h)("div",{class:"control"},(0,a.h)("input",{class:"input",id:"max-fps-input",type:"number",onInput:function(t){t.target&&s("settings/max-fps/update",t.target.value)},step:1,min:1,max:200,value:o.maxFps}))))),(0,a.h)("div",{class:"field is-horizontal"},(0,a.h)("div",{class:"field-label"},(0,a.h)("label",{class:"label"},"Serial port")),(0,a.h)("div",{class:"field-body"},(0,a.h)("div",{class:"field"},(0,a.h)("div",{class:"control"},(0,a.h)("input",{type:"checkbox",checked:o.serialEnabled,onInput:function(t){t.target&&s("settings/serial/update",t.target.checked)}}))))))),d()?null:(0,a.h)(w,null)))},C=function(){var t=null===localStorage.getItem(f),e=(0,c.eJ)(!1),r=e[0],i=e[1],s=(0,c.eJ)(t),o=s[0],l=s[1],u=(0,c.eJ)(!1),h=u[0],p=u[1];return t&&localStorage.setItem(f,"false"),(0,a.h)("nav",{class:"navbar has-shadow",role:"navigation","aria-label":"main navigation"},(0,a.h)("div",{class:"navbar-menu"}),(0,a.h)("div",{class:"navbar-brand"},(0,a.h)("a",{class:"navbar-item",href:"/"},(0,a.h)("img",{src:n(425)})),(0,a.h)("a",{role:"button",class:"navbar-burger","aria-label":"menu","aria-expanded":"false",onClick:function(){return p(!h)}},(0,a.h)("span",{"aria-hidden":"true"}),(0,a.h)("span",{"aria-hidden":"true"}),(0,a.h)("span",{"aria-hidden":"true"}))),(0,a.h)("div",{class:"navbar-menu ".concat(h?"is-active":"")},(0,a.h)("div",{class:"navbar-start"}),(0,a.h)("div",{class:"navbar-end"},(0,a.h)("div",{class:"navbar-item"},(0,a.h)("a",{href:"#",onClick:function(){return l(!0)}},(0,a.h)("span",{class:"icon"},(0,a.h)("i",{class:"padme icon-question"})))),(0,a.h)("div",{class:"navbar-item"},(0,a.h)("a",{href:"#",onClick:function(){return i(!0)}},(0,a.h)("span",{class:"icon"},(0,a.h)("i",{class:"padme icon-cog"})))))),(0,a.h)(x,{isOpen:r,onClose:function(){return i(!1)}}),(0,a.h)(k,{isOpen:o,onClose:function(){return l(!1)}}))},A=function(t){var e=(0,c.eJ)(""),n=e[0],s=e[1],o=(0,i.bI)().dispatch;return(0,a.h)("div",{class:"file has-name is-fullwidth"},(0,a.h)("label",{class:"file-label"},(0,a.h)("input",{class:"file-input",accept:".gb",type:"file",name:"resume",onChange:function(e){o("cartridge/unload");var n=e.target.files;if(n&&n.length>0){var a=n[0];s(a.name),setTimeout((function(){return e=void 0,n=void 0,s=function(){var e,n,i;return function(t,e){var n,r,a,i,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((a=(a=s.trys).length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){s.label=i[1];break}if(6===i[0]&&s.label<a[1]){s.label=a[1],a=i;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(i);break}a[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}}(this,(function(s){switch(s.label){case 0:return s.trys.push([0,3,,4]),[4,a.arrayBuffer()];case 1:return e=s.sent(),n=new Uint8Array(e),i=r.d.new(n),o("cartridge/load",i),[4,t.onload(i)];case 2:case 3:return s.sent(),[3,4];case 4:return[2]}}))},new((i=void 0)||(i=Promise))((function(t,r){function a(t){try{l(s.next(t))}catch(t){r(t)}}function o(t){try{l(s.throw(t))}catch(t){r(t)}}function l(e){var n;e.done?t(e.value):(n=e.value,n instanceof i?n:new i((function(t){t(n)}))).then(a,o)}l((s=s.apply(e,n||[])).next())}));var e,n,i,s}),300)}}}),(0,a.h)("span",{class:"file-cta"},(0,a.h)("span",{class:"file-label"},"SELECT A GAME…")),(0,a.h)("span",{class:"file-name"},n)))},S=function(t){var e=t.x,n=t.y,r=t.width,i=t.height,s=t.className,o=t.scale,l=void 0===o?1:o,c=t.children;return(0,a.h)("div",{style:{position:"absolute",top:n*l+"px",left:e*l+"px",width:r*l+"px",height:i*l+"px"},class:s},c)};const E={control:"M6XhixCTUiFt6svHr_fN",active:"g_cZdpMwlRajnKIM2N6y","control-dir":"uZ4GsQ_r1Dv120AUwt5Q","control-action":"GJBatqF4ySdFHfFroN7G","control-s":"uA90uxYw2VkhUMoDh9H3"};var O=function(){return O=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t},O.apply(this,arguments)},P=function(t){var e=E.control;return t.className&&(e+=" ".concat(E[t.className])),t.active&&(e+=" ".concat(E.active)),(0,a.h)(S,O({},t,{className:e}))},T=function(){return T=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t},T.apply(this,arguments)},N=function(t){return(0,a.h)(P,T({width:28,height:28,className:"control-action"},t))},D=function(){return D=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t},D.apply(this,arguments)},F=function(t){return(0,a.h)(P,D({width:18,height:18,className:"control-dir"},t))},R=function(){return R=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t},R.apply(this,arguments)},M=function(t){return(0,a.h)(P,R({width:32,height:10,className:"control-s"},t))};var U,L=(U=function(t,e){return U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},U(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}U(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),I=function(t){function e(e){var n=t.call(this,e)||this;return n.state={fps:0},n._frameCount=0,n._startTime=0,n._endTime=0,n}return L(e,t),e.prototype.start=function(){this._startTime=(new Date).getTime()},e.prototype.update=function(t){this._startTime=(new Date).getTime()-t,++this._frameCount},e.prototype.elapsed=function(){var t=(new Date).getTime();return this._startTime-this._endTime>=1e3&&(this.setState({fps:this._frameCount}),this._endTime=t,this._frameCount=0),t-this._startTime},e.prototype.render=function(){return(0,a.h)("div",{class:"Q0jCixTmhFFlPf3a9u1e"},(0,a.h)("span",{class:"UtoSW5YjrSMPe0e4Pwh8"},"FPS:"),(0,a.h)("span",{class:"sASStNaRxwTUMKDklnxK"},this.state.fps))},e}(a.wA);const j="So0RVWOazuZiszchlC3g";var z=function(){return z=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t},z.apply(this,arguments)},H=function(t){var e=t.toggled,n=t.onChange,r=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]])}return n}(t,["toggled","onChange"]);return(0,a.h)(S,z({className:"RiXoVlg2N9RmJIuJ2zWB"},r),(0,a.h)("div",{class:"_7D0cPA90KMrMo2ooeEmw"}),(0,a.h)("span",{class:j},"OFF"),(0,a.h)("label",{class:"VS5SjVUdXu8qVTdJML6J"},(0,a.h)("input",{type:"checkbox",checked:e,onChange:function(){return n(!e)}}),(0,a.h)("span",{class:"ivuOQY6lpEBpUAUux5hO"})),(0,a.h)("span",{class:j},"ON"),(0,a.h)("div",{class:"eHRfkMGSnFJhSarEMRm1"}))},B=n(564);const K={container:"wePrn9G5tYtNPUN_gLQn",overlay:"gDveyTRzcdVtTvu82vlB",classic:"wAmrBQDMGG08dNeeTOfM"};var G=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),J=function(){return J=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t},J.apply(this,arguments)},q=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._canvasRef=(0,a.Vf)(),e}return G(e,t),e.prototype.render=function(){var t=this.props.settings.styleName;return(0,a.h)(S,J({className:K.container},this.props),(0,a.h)("canvas",{ref:this._canvasRef,width:this.props.width,height:this.props.height}),(0,a.h)("div",{class:K.overlay+" "+K[t]}))},e.prototype.setFramebuffer=function(t){var e=new Uint8ClampedArray(B.memory.buffer,t,92160);this._img=new ImageData(e,160,144)},e.prototype.updateImage=function(){if(this._img){var t=this._canvasRef.current.getContext("2d");t&&t.putImageData(this._img,0,0)}},e.prototype.clear=function(){var t=this._canvasRef.current,e=t.getContext("2d");e&&e.clearRect(0,0,t.width,t.height)},e}(a.wA),Y=(0,i.ZF)("settings",q);var V=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Z=function(t,e,n,r){return new(n||(n=Promise))((function(a,i){function s(t){try{l(r.next(t))}catch(t){i(t)}}function o(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,o)}l((r=r.apply(t,e||[])).next())}))},W=function(t,e){var n,r,a,i,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((a=(a=s.trys).length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){s.label=i[1];break}if(6===i[0]&&s.label<a[1]){s.label=a[1],a=i;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(i);break}a[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},X={x:47,y:285,width:18,height:18},Q={x:47,y:323,width:18,height:18},$={x:28,y:304,width:18,height:18},tt={x:66,y:304,width:18,height:18},et={x:225,y:284,width:28,height:28},nt={x:178,y:306,width:28,height:28},rt={x:83,y:375,width:34,height:10},at={x:131,y:375,width:34,height:10},it=function(t,e,n,r,a,i){var s=t+r.x*a-i,o=e+r.y*a-i;return n.clientX>=s-n.radiusX&&n.clientX<=s+r.width*a+i+n.radiusX&&n.clientY>=o-n.radiusY&&n.clientY<=o+r.height*a+i+n.radiusY},st=function(t){function e(e){var n=t.call(this,e)||this;return n._gameRef=(0,a.Vf)(),n._screenRef=(0,a.Vf)(),n._fpsRef=(0,a.Vf)(),n._reqId=void 0,n.state={key_Up_active:!1,key_Down_active:!1,key_Left_active:!1,key_Right_active:!1,key_A_active:!1,key_B_active:!1,key_Select_active:!1,key_Start_active:!1,isRunning:!1},n._updateFrame=n._updateFrame.bind(n),n}return V(e,t),e.prototype._handleControlTouch=function(t){var e=this._gameRef.current.getBoundingClientRect(),n=e.x,a=e.y,i=window.screen.width/280,s=12*i;it(n,a,t,X,i,s)&&this._pressCtrl(r.mp.Up,!0),it(n,a,t,Q,i,s)&&this._pressCtrl(r.mp.Down,!0),it(n,a,t,$,i,s)&&this._pressCtrl(r.mp.Left,!0),it(n,a,t,tt,i,s)&&this._pressCtrl(r.mp.Right,!0),it(n,a,t,et,i,s)&&this._pressCtrl(r.mp.A,!0),it(n,a,t,nt,i,s)&&this._pressCtrl(r.mp.B,!0),it(n,a,t,rt,i,0)&&this._pressCtrl(r.mp.Select,!0),it(n,a,t,at,i,0)&&this._pressCtrl(r.mp.Start,!0)},e.prototype._handleTouch=function(t){1===t.touches.length?this._handleControlTouch(t.touches[0]):(this._handleControlTouch(t.touches[0]),this._handleControlTouch(t.touches[1]))},e.prototype._pressCtrl=function(t,e){var n;this.setState(((n={})["key_".concat(r.mp[t],"_active")]=e,n)),this.emu&&this.emu.set_button(t,e)},e.prototype._handleKeyPress=function(t,e){var n=this.props.settings.keys;for(var r in n)n[r]==t&&this._pressCtrl(r,e)},e.prototype._updateFrame=function(){if(this.emu&&this.state.isRunning){var t=1e3/this.props.settings.maxFps,e=this._fpsRef.current.elapsed();this._reqId=requestAnimationFrame(this._updateFrame),e>t&&(this._fpsRef.current.update(e%t),this.emu.update(),this._screenRef.current.updateImage())}},e.prototype.loadCartridge=function(t){return Z(this,void 0,void 0,(function(){var e=this;return W(this,(function(n){switch(n.label){case 0:return this.emu?this.emu.load_cartridge(t):(this.emu=r.G2.new(t,(function(t){e.props.dispatch("serial/putchar",String.fromCharCode(t))})),this._screenRef.current.setFramebuffer(this.emu.framebuffer())),[4,this.run()];case 1:return n.sent(),[2]}}))}))},e.prototype.run=function(){return Z(this,void 0,void 0,(function(){return W(this,(function(t){switch(t.label){case 0:return[4,this.setState({isRunning:!0})];case 1:return t.sent(),this._reqId&&cancelAnimationFrame(this._reqId),this._fpsRef.current.start(),this._updateFrame(),[2]}}))}))},e.prototype.stop=function(){this.emu&&this.emu.reset(),this._screenRef.current.clear(),this.setState({isRunning:!1})},e.prototype.componentDidMount=function(){var t=this;d()?this._gameRef&&this._gameRef.current&&(this._gameRef.current.addEventListener("touchstart",(function(e){t._handleTouch(e)})),this._gameRef.current.addEventListener("touchend",(function(){t._pressCtrl(r.mp.Up,!1),t._pressCtrl(r.mp.Down,!1),t._pressCtrl(r.mp.Left,!1),t._pressCtrl(r.mp.Right,!1),t._pressCtrl(r.mp.A,!1),t._pressCtrl(r.mp.B,!1),t._pressCtrl(r.mp.Select,!1),t._pressCtrl(r.mp.Start,!1)}))):(document.addEventListener("keydown",(function(e){e.preventDefault(),t._handleKeyPress(e.keyCode,!0)})),document.addEventListener("keyup",(function(e){e.preventDefault(),t._handleKeyPress(e.keyCode,!1)})))},e.prototype.render=function(){var t=this,e=this.props.settings.scale;return d()&&(e=window.screen.width/280),(0,a.h)("div",{class:"WUBfqXa_9TP7DdiHvN1C",style:{width:280*e}},(0,a.h)(A,{onload:function(e){t.loadCartridge(e)}}),(0,a.h)("div",{ref:this._gameRef,class:"yzss31FT0PgvHRDUIWZd",style:{height:462*e}},(0,a.h)(H,{x:33,y:4,width:80,height:18,scale:e,toggled:this.state.isRunning,onChange:function(e){return e?t.run():t.stop()}}),(0,a.h)(S,{x:35,y:110,width:8,height:8,scale:e,className:"k8fNQFot2FdnE7qT6HYY"+(this.state.isRunning?" ".concat("gSFXOHY0btUzEJaVHuW9"):"")}),(0,a.h)(Y,{ref:this._screenRef,x:60,y:57,width:160,height:144,scale:e}),(0,a.h)(F,{x:X.x,y:X.y,scale:e,active:this.state.key_Up_active}),(0,a.h)(F,{x:Q.x,y:Q.y,scale:e,active:this.state.key_Down_active}),(0,a.h)(F,{x:$.x,y:$.y,scale:e,active:this.state.key_Left_active}),(0,a.h)(F,{x:tt.x,y:tt.y,scale:e,active:this.state.key_Right_active}),(0,a.h)(N,{x:et.x,y:et.y,scale:e,active:this.state.key_A_active}),(0,a.h)(N,{x:nt.x,y:nt.y,scale:e,active:this.state.key_B_active}),(0,a.h)(M,{x:rt.x,y:rt.y,scale:e,active:this.state.key_Select_active}),(0,a.h)(M,{x:at.x,y:at.y,scale:e,active:this.state.key_Start_active})),(0,a.h)(I,{ref:this._fpsRef}))},e}(a.wA),ot=(0,i.ZF)("settings",st),lt=function(t){var e=t.children;return(0,a.h)("div",{class:"container"},(0,a.h)("div",{class:"columns is-2"},e))},ct=function(t){var e=t.children;return(0,a.h)("header",null,e)},ut=function(t){var e=t.children;return(0,a.h)("div",{class:"footer"},(0,a.h)("div",{class:"content is-size-6 has-text-centered"},e))},ht=function(t){var e=t.children;return(0,a.h)("div",{class:"column is-narrow"},e)},pt=function(t){var e=t.children;return(0,a.h)("div",{class:"column is-hidden-touch"},(0,a.h)("div",{class:"pt-4",style:{minWidth:"250px"}},e))};var dt,ft=function(){var t=(0,c.sO)(null),e=(0,i.bI)("serial","settings"),n=e.serial.text,r=e.settings.serialEnabled;return t.current&&(t.current.value=n),r?(0,a.h)("article",{class:"message"},(0,a.h)("div",{class:"message-header"},"Serial"),(0,a.h)("div",{class:"message-body"},(0,a.h)("textarea",{class:"textarea is-small ".concat("SxJjF_GgPuIJtAiv_OHF"),ref:t,readonly:!0}))):null},vt=n(802),yt=n(563),mt=function(){return mt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t},mt.apply(this,arguments)},_t={scale:1.2,styleName:"classic",keys:(dt={},dt[r.mp.Up]=o["⬆"],dt[r.mp.Down]=o["⬇"],dt[r.mp.Left]=o["⬅"],dt[r.mp.Right]=o["➡"],dt[r.mp.A]=o.A,dt[r.mp.B]=o.S,dt[r.mp.Select]=o.ALT,dt[r.mp.Start]=o.ENTER,dt),maxFps:60,serialEnabled:!1};var gt=function(){return gt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t},gt.apply(this,arguments)},bt={loaded:!1,title:"",type:"",licensee:"",romSize:0,ramSize:0,colorMode:"",isJp:!1,version:0,checksum:!1};var wt={text:""};const kt=(0,yt.M)([function(t){t.on("@init",(function(){return{settings:_t}})),t.on("settings/scale/update",(function(t,e){var n=t.settings;return{settings:mt(mt({},n),{scale:e})}})),t.on("settings/key/update",(function(t,e){var n,r=t.settings;return{settings:mt(mt({},r),{keys:mt(mt({},r.keys),(n={},n[e.name]=e.code,n))})}})),t.on("settings/style/update",(function(t,e){var n=t.settings;return{settings:mt(mt({},n),{styleName:e})}})),t.on("settings/max-fps/update",(function(t,e){var n=t.settings;return{settings:mt(mt({},n),{maxFps:e})}})),t.on("settings/serial/update",(function(t,e){var n=t.settings;return{settings:mt(mt({},n),{serialEnabled:e})}})),t.on("settings/reset",(function(){return{settings:_t}}))},function(t){t.on("@init",(function(){return{cartridge:bt}})),t.on("cartridge/load",(function(t,e){return{cartridge:{loaded:!0,title:e.title(),type:e.cartridge_type(),licensee:e.licensee(),romSize:e.rom_size(),ramSize:e.ram_size(),colorMode:e.cgb_mode(),isJp:e.is_jp(),version:e.version(),checksum:e.checksum()}}})),t.on("cartridge/unload",(function(){return{cartridge:gt({},bt)}}))},function(t){t.on("@init",(function(){return{serial:wt}})),t.on("serial/putchar",(function(t,e){return{serial:{text:t.serial.text+e}}})),t.on("serial/clear",(function(){return{serial:wt}}))},(0,vt.x)(["settings"])]);(0,r.DH)(),(0,a.sY)((0,a.h)((function(){return(0,a.h)(i.xf.Provider,{value:kt},(0,a.h)(ct,null,(0,a.h)(C,null)),(0,a.h)(lt,null,(0,a.h)(pt,null,(0,a.h)(l,null)),(0,a.h)(ht,null,(0,a.h)(ot,null)),(0,a.h)(pt,null,(0,a.h)(ft,null))),(0,a.h)(ut,null,"v","0.0.6"," | ",(0,a.h)("a",{href:"https://github.com/alexlren/padme-browser/tree/ebacb9fee6fc9403b73a5b721742364906d1eeb8"},"ebacb9fe")))}),null),document.querySelector("#app"))},425:(t,e,n)=>{t.exports=n.p+"c10c0f0fd39f30d9d82d.svg"},564:(t,e,n)=>{var r=n.w[t.id];t.exports=r,n(269),r[""]()}}]);